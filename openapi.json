{"openapi":"3.1.0","info":{"title":"Text-Audio Alignment API","description":"API for forced alignment of text and audio files","version":"1.0.0"},"paths":{"/alignment/":{"post":{"tags":["alignment"],"summary":"Create alignment task","description":"Upload audio and text files to create a new alignment task. The task will be queued for processing.","operationId":"create_alignment_request_alignment__post","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_alignment_request_alignment__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlignmentQueueResponse"}}}},"201":{"description":"Alignment task created successfully"},"400":{"description":"Invalid file format or model validation error"},"500":{"description":"Internal server error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["alignment"],"summary":"List alignment tasks","description":"Retrieve all alignment tasks with pagination support.","operationId":"get_alignment_requests_alignment__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlignmentQueueResponse"},"title":"Response Get Alignment Requests Alignment  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/alignment/{task_id}":{"get":{"tags":["alignment"],"summary":"Get alignment task","description":"Retrieve a specific alignment task by ID.","operationId":"get_alignment_request_alignment__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Alignment task found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlignmentQueueResponse"}}}},"404":{"description":"Alignment task not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["alignment"],"summary":"Update alignment task","description":"Update an existing alignment task (status, error message, result, etc.).","operationId":"update_alignment_request_alignment__task_id__put","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlignmentQueueUpdate"}}}},"responses":{"200":{"description":"Alignment task updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlignmentQueueResponse"}}}},"404":{"description":"Alignment task not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["alignment"],"summary":"Delete alignment task","description":"Delete an alignment task from the queue.","operationId":"delete_alignment_request_alignment__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Task deleted successfully","content":{"application/json":{"schema":{}}}},"404":{"description":"Alignment task not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/alignment/status/{status}":{"get":{"tags":["alignment"],"summary":"Get tasks by status","description":"Retrieve all alignment tasks filtered by their current status.","operationId":"get_tasks_by_status_endpoint_alignment_status__status__get","parameters":[{"name":"status","in":"path","required":true,"schema":{"$ref":"#/components/schemas/AlignmentStatus"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlignmentQueueResponse"},"title":"Response Get Tasks By Status Endpoint Alignment Status  Status  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models/":{"get":{"tags":["models"],"summary":"List MFA models","description":"Retrieve all MFA models with optional language filtering and pagination.","operationId":"get_models_models__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","title":"Language"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MFAModelResponse"},"title":"Response Get Models Models  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models/by-type/{model_type}":{"get":{"tags":["models"],"summary":"Get models by type","description":"Retrieve MFA models filtered by type (ACOUSTIC, DICTIONARY, G2P) with optional language filter.","operationId":"get_models_by_type_models_by_type__model_type__get","parameters":[{"name":"model_type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ModelType"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","title":"Language"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MFAModelResponse"},"title":"Response Get Models By Type Models By Type  Model Type  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models/languages":{"get":{"tags":["models"],"summary":"List supported languages","description":"Retrieve all languages that have available MFA models.","operationId":"get_supported_languages_models_languages_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LanguageResponse"},"title":"Response Get Supported Languages Models Languages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models/update":{"post":{"tags":["models"],"summary":"Update models from GitHub","description":"Fetch and update MFA models from the official GitHub repository.","operationId":"update_models_models_update_post","responses":{"200":{"description":"Models updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelsUpdateResponse"}}}},"500":{"description":"Failed to update models"}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AlignmentQueueResponse":{"properties":{"original_audio_filename":{"type":"string","title":"Original Audio Filename"},"original_text_filename":{"type":"string","title":"Original Text Filename"},"id":{"type":"integer","title":"Id"},"audio_file_path":{"type":"string","title":"Audio File Path"},"text_file_path":{"type":"string","title":"Text File Path"},"acoustic_model":{"$ref":"#/components/schemas/ModelParameter"},"dictionary_model":{"$ref":"#/components/schemas/ModelParameter"},"g2p_model":{"anyOf":[{"$ref":"#/components/schemas/ModelParameter"},{"type":"null"}]},"status":{"$ref":"#/components/schemas/AlignmentStatus"},"result_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Result Path"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["original_audio_filename","original_text_filename","id","audio_file_path","text_file_path","acoustic_model","dictionary_model","status","created_at","updated_at"],"title":"AlignmentQueueResponse"},"AlignmentQueueUpdate":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/AlignmentStatus"},{"type":"null"}]},"result_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Result Path"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","title":"AlignmentQueueUpdate"},"AlignmentStatus":{"type":"string","enum":["pending","processing","completed","failed"],"title":"AlignmentStatus"},"Body_create_alignment_request_alignment__post":{"properties":{"audio_file":{"type":"string","format":"binary","title":"Audio File","description":"Audio file (MP3 or WAV format)"},"text_file":{"type":"string","format":"binary","title":"Text File","description":"Text file (TXT format)"},"acoustic_model_name":{"type":"string","title":"Acoustic Model Name","description":"Name of the acoustic model (e.g., 'russian_mfa')"},"acoustic_model_version":{"type":"string","title":"Acoustic Model Version","description":"Version of the acoustic model (e.g., '3.1.0')"},"dictionary_model_name":{"type":"string","title":"Dictionary Model Name","description":"Name of the dictionary model (e.g., 'russian_mfa')"},"dictionary_model_version":{"type":"string","title":"Dictionary Model Version","description":"Version of the dictionary model (e.g., '3.1.0')"},"g2p_model_name":{"type":"string","title":"G2P Model Name","description":"Name of the G2P model (optional, e.g., 'russian_mfa_g2p')"},"g2p_model_version":{"type":"string","title":"G2P Model Version","description":"Version of the G2P model (optional, e.g., '3.1.0')"}},"type":"object","required":["audio_file","text_file","acoustic_model_name","acoustic_model_version","dictionary_model_name","dictionary_model_version"],"title":"Body_create_alignment_request_alignment__post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LanguageResponse":{"properties":{"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["code","name","id","created_at","updated_at"],"title":"LanguageResponse"},"MFAModelResponse":{"properties":{"name":{"type":"string","title":"Name"},"model_type":{"$ref":"#/components/schemas/ModelType"},"version":{"type":"string","title":"Version"},"variant":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Variant"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"type":"integer","title":"Id"},"language_id":{"type":"integer","title":"Language Id"},"language":{"$ref":"#/components/schemas/LanguageResponse"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","model_type","version","id","language_id","language","created_at","updated_at"],"title":"MFAModelResponse"},"ModelParameter":{"properties":{"name":{"type":"string","title":"Name"},"version":{"type":"string","title":"Version"}},"type":"object","required":["name","version"],"title":"ModelParameter"},"ModelType":{"type":"string","enum":["acoustic","g2p","dictionary"],"title":"ModelType"},"ModelsUpdateResponse":{"properties":{"message":{"type":"string","title":"Message"},"updated_models":{"type":"integer","title":"Updated Models"},"updated_languages":{"type":"integer","title":"Updated Languages"}},"type":"object","required":["message","updated_models","updated_languages"],"title":"ModelsUpdateResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}