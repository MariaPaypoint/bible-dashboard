# Авторизация

## Быстрый старт

1. **Создайте `.env` файл:**
   ```bash
   cp .env.example .env
   ```

2. **Укажите API ключ:**
   ```env
   VITE_API_KEY=your_api_key_here
   ```

3. **Запустите приложение:**
   ```bash
   npm run dev
   ```

## Типы авторизации

### Публичные эндпоинты (чтение данных)
Требуют **API ключ**:
- Языки, переводы, книги
- Главы и отрывки с выравниванием
- Аудиофайлы

**Передача ключа:**
- Обычные запросы: заголовок `X-API-Key`
- Аудио файлы: query параметр `?api_key=xxx`

### Административные эндпоинты (изменение данных)
Требуют **JWT токен**:
- Управление голосами и аномалиями
- Ручные исправления тайминга
- Проверка переводов

**Получение токена:**
1. Войдите через меню Settings → "Войти"
2. Введите учетные данные
3. Токен сохраняется автоматически (действителен 24 часа)

## Работа без авторизации

Нажмите "Продолжить без авторизации" — доступны все функции просмотра.

## Обработка ошибок

- **401 Unauthorized** → Токен истек, автоматический редирект на логин
- **403 Forbidden** → Неверный API ключ, проверьте `.env`

## Архитектура

```
/src/services/auth.ts       - Управление JWT токенами
/src/config/api.ts          - Конфигурация API ключа
/src/utils/audio.ts         - Утилиты для аудио с авторизацией
/src/composables/useAuth.ts - Vue composable для авторизации
/src/Components/Login.vue   - Страница входа
```

**Interceptors в ApiService:**
- Автоматически добавляет нужные заголовки
- Обрабатывает ошибки 401/403
- Генерирует события для редиректов
